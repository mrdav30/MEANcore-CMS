<div class="container p-3">
  <div class="card form-group">
    <div class="card-body">
      <h1 class="post-title card-title">{{vm.post.title}}</h1>
      <div class="row">
        <div class="col-sm-2 text-center">
          <img ngxGravatar [(email)]="vm.post.author.email" [(src)]="vm.post.author.avatar" class="title-avatar">
        </div>
        <div class="col-sm-10">
          <div>
            <i class="icon-user mr-2"></i>
            <a class="post-details-author mr-2"
              [routerLink]="'/blog/posts/author/' + vm.post.authorId">{{vm.post.author.name}}</a>
            <span class="post-date mr-2"><i class="icon-clock mr-2"></i>{{vm.post.publishDate | date}}</span>
            <span [hidden]="!vm.post.views" class="post-views"><i class="icon-eye mr-2"></i>{{vm.post.views}}
              VIEWS</span>
          </div>
          <div>
            <a [hidden]="!vm.post.author.twitterUrl" class="mr-2" [href]="vm.post.author.twitterUrl" target="_blank"
              placement="top" ngbTooltip="Find me on Twitter">
              <i class="icon-twitter"></i>
            </a>
            <a [hidden]="!vm.post.author.facebookUrl" class="mr-2" [href]="vm.post.author.facebookUrl" target="_blank"
              placement="top" ngbTooltip="Find me on Facebook">
              <i class="icon-facebook-f"></i>
            </a>
            <a [hidden]="!vm.post.author.githubUrl" class="mr-2" [href]="vm.post.author.githubUrl" target="_blank"
              placement="top" ngbTooltip="Find me on Github">
              <i class="icon-github"></i>
            </a>
            <a [hidden]="!vm.post.author.linkedinUrl" class="mr-2" [href]="vm.post.author.linkedinUrl" target="_blank"
              placement="top" ngbTooltip="Find me on LinkedIn">
              <i class="icon-linkedin-in"></i>
            </a>
            <a [hidden]="!vm.post.author.stackOverflowUrl" class="mr-2" [href]="vm.post.author.stackOverflowUrl"
              target="_blank" placement="top" ngbTooltip="Find me on StackOverflow">
              <i class="icon-stack-overflow"></i>
            </a>
            <a [hidden]="!vm.post.author.personalUrl" [href]="vm.post.author.personalUrl" target="_blank"
              placement="top" ngbTooltip="My personal site">
              <i class="icon-external-link"></i>
            </a>
          </div>
          <div [hidden]="!vm.post.updated">
            <strong>Last Updated - </strong>{{vm.post.updated | date}}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="form-group text-center">
      <img width="700" height="400" class="post-details-image" [src]="vm.post.thumbnailUrl">
    </div>
    <div [hidden]="!vm.post.summary" class="post-summary">
      <strong>Summary : </strong>{{vm.post.summary}}
    </div>
    <hr />
    <div class="row">
      <div class="col-sm-12">
        <div class="post-body ck ck-content" [innerHtml]="vm.post.body"></div>
      </div>
    </div>
  </div>

  <div *ngIf="vm" class="post-footer">
    <div class="form-group">
      <div class="card form-group">
        <div class="card-body">
          <div class="row">
            <div class="col-sm-2 text-center">
              <img ngxGravatar [(email)]="vm.post.author.email" [(src)]="vm.post.author.avatar" class="bio-avatar">
            </div>
            <div class="col-sm-6">
              <h5>Author : {{vm.post.author.name}}</h5>
              <div [innerHtml]="vm.post.author.about"></div>
              <div class="author-social-links d-flex flex-row">
                <a [hidden]="!vm.post.author.twitterUrl" class="mr-2" [href]="vm.post.author.twitterUrl" target="_blank"
                  placement="top" ngbTooltip="Find me on Twitter">
                  <i class="icon-twitter"></i>
                </a>
                <a [hidden]="!vm.post.author.facebookUrl" class="mr-2" [href]="vm.post.author.facebookUrl"
                  target="_blank" placement="top" ngbTooltip="Find me on Facebook">
                  <i class="icon-facebook-f"></i>
                </a>
                <a [hidden]="!vm.post.author.githubUrl" class="mr-2" [href]="vm.post.author.githubUrl" target="_blank"
                  placement="top" ngbTooltip="Find me on Github">
                  <i class="icon-github"></i>
                </a>
                <a [hidden]="!vm.post.author.linkedinUrl" class="mr-2" [href]="vm.post.author.linkedinUrl"
                  target="_blank" placement="top" ngbTooltip="Find me on LinkedIn">
                  <i class="icon-linkedin-in"></i>
                </a>
                <a [hidden]="!vm.post.author.stackOverflowUrl" class="mr-2" [href]="vm.post.author.stackOverflowUrl"
                  target="_blank" placement="top" ngbTooltip="Find me on StackOverflow">
                  <i class="icon-stack-overflow"></i>
                </a>
                <a [hidden]="!vm.post.author.personalUrl" [href]="vm.post.author.personalUrl" target="_blank"
                  placement="top" ngbTooltip="My personal site">
                  <i class="icon-external-link"></i>
                </a>
              </div>
              <div>
                <a [routerLink]="'/blog/posts/author/' + vm.post.authorId">
                  View all posts by {{vm.post.author.name}}
                </a>
              </div>
            </div>
            <div class="col-sm-4 author-personal-info">
              <div [hidden]="!vm.post.author.workplace">
                <label class="mr-2"><strong>Workplace -</strong></label>
                <span>{{vm.post.author.workplace}}</span>
              </div>
              <div [hidden]="!vm.post.author.location">
                <label class="mr-2"><strong>Location -</strong></label>
                <span>{{vm.post.author.location}}</span>
              </div>
              <div [hidden]="!vm.post.author.education">
                <label class="mr-2"><strong>Education -</strong></label>
                <span>{{vm.post.author.education}}</span>
              </div>
              <div [hidden]="!vm.post.author.created">
                <label class="mr-2"><strong>Joined -</strong></label>
                <span>{{vm.post.author.created | date}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div [hidden]="vm.post.slugTags && !vm.post.slugTags.length" class="post-tags form-group">
        <strong class="mr-2">Tags :</strong>
        <a *ngFor="let tag of vm.post.slugTags" [routerLink]="'/blog/posts/tag/' + tag.slug"
          class="comma mr-2">#{{tag.text}}</a>
      </div>
      <div class="social-share-buttons form-group text-center">
        <div class="social-icons spinned">
          <a class="item facebook" [href]="'http://facebook.com/sharer.php?u=' + vm.post.perma_link"
            (click)="onNavigate($event.target.href);$event.preventDefault()" placement="bottom"
            ngbTooltip="Share on Facebook"><i class="icon-facebook-f"></i></a>
          <a class="item twitter"
            [href]="'http://twitter.com/intent/tweet?url=' + vm.post.perma_link + '&text=' + vm.metaTitle"
            (click)="onNavigate($event.target.href);$event.preventDefault()" placement="bottom"
            ngbTooltip="Tweet this!"><i class="icon-twitter"></i></a>
          <!-- RIP google plus: April 2019-->
          <!-- <a class="item google" [href]="'https://plus.google.com/share?url=' + vm.post.perma_link"
                        target="_blank" placement="bottom" ngbTooltip="Share on Google+"><i class="icon-google-plus-g"></i></a> -->
          <a class="item linkedin"
            [href]="'https://www.linkedin.com/shareArticle?mini=true&title=' + vm.metaTitle + '&url=' + vm.post.url"
            (click)="onNavigate($event.target.href);$event.preventDefault()" placement="bottom"
            ngbTooltip="Share on LinkedIn"><i class="icon-linkedin-in"></i></a>
          <a class="item email"
            [href]="'https://api.addthis.com/oexchange/0.8/forward/email/offer?url='+ vm.post.perma_link + '&title=' + vm.metaTitle + '&ct=1'"
            (click)="onNavigate($event.target.href);$event.preventDefault()" placement="bottom"
            ngbTooltip="Share via email"><i class="icon-envelope"></i></a>
        </div>
      </div>
    </div>
    <app-disqus-thread [shortname]="disqusShortname" [identifier]="vm.metaTitle"></app-disqus-thread>
  </div>
</div>
